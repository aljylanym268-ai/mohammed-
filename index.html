<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØ§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª - Smart-Soft</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: url('https://i.imgur.com/7K6fXzL.jpg') no-repeat center center fixed;
      background-size: cover;
      color: #fff;
      overflow-x: hidden;
    }

    /* Ø´Ø±ÙŠØ· Ø§Ù„Ù‚Ù…Ø© */
    .top-bar {
      background: rgba(255, 255, 255, 0.9);
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      z-index: 100;
      position: relative;
    }

    .top-bar .icons {
      display: flex;
      gap: 15px;
    }

    .top-bar .icons div {
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      padding: 5px;
      transition: transform 0.2s;
    }

    .top-bar .icons div:hover {
      transform: scale(1.1);
    }

    .top-bar .icons img {
      width: 30px;
      height: 30px;
      object-fit: contain;
    }

    .top-bar .icons span {
      font-size: 12px;
      text-align: center;
      color: #333;
      white-space: nowrap;
    }

    .top-bar .status {
      background: #007bff;
      color: white;
      padding: 5px 10px;
      border-radius: 4px;
      font-weight: bold;
      margin-right: 10px;
      font-size: 14px;
    }

    .exit-btn {
      background: #e74c3c;
      color: white;
      padding: 8px 15px;
      border-radius: 5px;
      margin-left: 10px;
      cursor: pointer;
      font-weight: bold;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .exit-btn:hover {
      background: #c0392b;
    }

    /* Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
    .main-container {
      padding: 30px;
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      max-width: 1200px;
      margin: 30px auto;
    }

    .tile {
      background: rgba(255, 255, 255, 0.85);
      border-radius: 10px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 120px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    .tile:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
    }

    .tile i {
      font-size: 40px;
      margin-bottom: 10px;
    }

    .tile span {
      font-size: 16px;
      font-weight: bold;
      color: #333;
    }

    /* Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…Ø®ØªÙ„ÙØ© Ù„Ù„Ø£Ø²Ø±Ø§Ø± */
    .tile:nth-child(1) { background: #a93226; color: white; }
    .tile:nth-child(2) { background: #7d3c98; color: white; }
    .tile:nth-child(3) { background: #16a085; color: white; }
    .tile:nth-child(4) { background: #2980b9; color: white; }
    .tile:nth-child(5) { background: #3498db; color: white; }
    .tile:nth-child(6) { background: #9b59b6; color: white; }
    .tile:nth-child(7) { background: #27ae60; color: white; }
    .tile:nth-child(8) { background: #16a085; color: white; }
    .tile:nth-child(9) { background: #e67e22; color: white; }
    .tile:nth-child(10) { background: #7f8c8d; color: white; }
    .tile:nth-child(11) { background: #2ecc71; color: white; }
    .tile:nth-child(12) { background: #9b59b6; color: white; }
    .tile:nth-child(13) { background: #e91e63; color: white; }

    /* Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø³ÙÙ„ÙŠ */
    .footer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: rgba(255, 255, 255, 0.9);
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
      z-index: 100;
    }

    .footer-left {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .footer-left span {
      font-size: 14px;
      color: #333;
    }

    .footer-right {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .weather {
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 14px;
      color: #333;
    }

    .icons-small {
      display: flex;
      gap: 10px;
    }

    .icons-small img {
      width: 20px;
      height: 20px;
      cursor: pointer;
    }

    /* Ù†Ø§ÙØ°Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø±ÙˆØ¬ */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 200;
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background: white;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      width: 300px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }

    .modal-content h3 {
      margin-bottom: 15px;
      color: #333;
    }

    .modal-buttons {
      display: flex;
      justify-content: space-around;
      margin-top: 20px;
    }

    .btn {
      padding: 8px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }

    .btn-yes {
      background: #27ae60;
      color: white;
    }

    .btn-no {
      background: #e74c3c;
      color: white;
    }

    .btn:hover {
      opacity: 0.9;
    }

    /* Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª */
    .fa {
      font-family: "FontAwesome";
      font-style: normal;
      font-weight: normal;
      text-decoration: inherit;
    }

    .fa-shopping-cart::before { content: "\f07a"; }
    .fa-file-text::before { content: "\f15c"; }
    .fa-credit-card::before { content: "\f09d"; }
    .fa-truck::before { content: "\f0d1"; }
    .fa-user::before { content: "\f007"; }
    .fa-users::before { content: "\f0c0"; }
    .fa-clipboard::before { content: "\f0ea"; }
    .fa-briefcase::before { content: "\f0b1"; }
    .fa-archive::before { content: "\f187"; }
    .fa-th-large::before { content: "\f009"; }
    .fa-money::before { content: "\f0d6"; }
    .fa-phone::before { content: "\f095"; }
    .fa-cogs::before { content: "\f085"; }
    .fa-database::before { content: "\f1c0"; }
    .fa-usd::before { content: "\f155"; }
    .fa-line-chart::before { content: "\f201"; }
    .fa-list-alt::before { content: "\f022"; }
    .fa-cart-plus::before { content: "\f217"; }
    .fa-cart-arrow-down::before { content: "\f218"; }
    .fa-folder-open::before { content: "\f07c"; }
    .fa-motorcycle::before { content: "\f21c"; }
    .fa-group::before { content: "\f0c0"; }
    .fa-inbox::before { content: "\f01c"; }
    .fa-sitemap::before { content: "\f0e8"; }
    .fa-user-tie::before { content: "\f508"; }
    .fa-box::before { content: "\f466"; }
    .fa-undo::before { content: "\f0e2"; }
    .fa-sign-out::before { content: "\f2f5"; }

    .icon-small {
      width: 20px;
      height: 20px;
      background: #ccc;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: #333;
    }

    @media (max-width: 768px) {
      .main-container {
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
        padding: 15px;
      }
      .top-bar .icons span {
        font-size: 10px;
      }
      .tile {
        min-height: 100px;
        padding: 15px;
      }
      .tile i {
        font-size: 30px;
      }
      .tile span {
        font-size: 14px;
      }
    }

    @media (max-width: 480px) {
      .main-container {
        grid-template-columns: 1fr;
      }
      .top-bar {
        flex-wrap: wrap;
      }
      .top-bar .icons {
        gap: 10px;
      }
      .footer {
        flex-direction: column;
        gap: 10px;
      }
    }

    /* Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© */
    .page-content {
      display: none;
      padding: 30px;
      background: rgba(255, 255, 255, 0.9);
      color: #333;
      border-radius: 10px;
      margin: 30px auto;
      max-width: 1200px;
    }

    .page-content.active {
      display: block;
    }

    .form-group {
      margin: 15px 0;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }

    .form-group input, .form-group select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    button {
      background: #27ae60;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
    }

    button:hover {
      background: #219653;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    th, td {
      padding: 12px;
      text-align: right;
      border: 1px solid #ddd;
    }

    th {
      background: #3498db;
      color: white;
    }

    tr:nth-child(even) {
      background: #f9f9f9;
    }

    .actions {
      display: flex;
      gap: 5px;
    }

    .edit-btn {
      background: #f39c12;
      padding: 5px 10px;
      border: none;
      border-radius: 3px;
      color: white;
      cursor: pointer;
    }

    .delete-btn {
      background: #e74c3c;
      padding: 5px 10px;
      border: none;
      border-radius: 3px;
      color: white;
      cursor: pointer;
    }

    .back-btn {
      background: #3498db;
      color: white;
      padding: 8px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-bottom: 20px;
    }

    .back-btn:hover {
      background: #2982c1;
    }

    .print-btn {
      background: #9b59b6;
      color: white;
      padding: 8px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-right: 10px;
    }

    .print-btn:hover {
      background: #8e44ad;
    }

    .header-page {
      background: #2c3e50;
      color: white;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .header-page h1 {
      margin: 0;
    }

    /* ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
    .login-box {
      background: rgba(255, 255, 255, 0.95);
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.2);
      width: 350px;
      text-align: center;
      color: #333;
      margin: 100px auto;
    }

    .login-box h2 {
      margin-bottom: 20px;
      color: #2c3e50;
    }

    .error {
      color: #e74c3c;
      margin-top: 10px;
    }
  </style>
</head>
<body>

  <!-- ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
  <div id="loginPage" style="display:block;">
    <div class="login-box">
      <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
      <div class="input-group">
        <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
        <input type="text" id="username" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
      </div>
      <div class="input-group">
        <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
        <input type="password" id="password" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
      </div>
      <div id="errorMessage" class="error"></div>
      <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
    </div>
  </div>

  <!-- Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
  <div id="dashboardPage" style="display:none;">
    <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ù‚Ù…Ø© -->
    <div class="top-bar">
      <div class="icons">
        <div><i class="fa fa-phone"></i><span>Ø¥ØªØµÙ„ Ø¨Ù†Ø§</span></div>
        <div><i class="fa fa-cogs"></i><span>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</span></div>
        <div><i class="fa fa-database"></i><span>Ø§Ù„Ù…Ø®Ø²Ù†</span></div>
        <div><i class="fa fa-usd"></i><span>Ø§Ù„Ø®Ø²Ù†Ø©</span></div>
        <div><i class="fa fa-line-chart"></i><span>Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</span></div>
        <div><i class="fa fa-list-alt"></i><span>Ø¹Ø±Ø¶ Ø³Ø¹Ø±</span></div>
        <div><i class="fa fa-cart-plus"></i><span>Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</span></div>
        <div><i class="fa fa-cart-arrow-down"></i><span>Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</span></div>
        <div><i class="fa fa-folder-open"></i><span>Ø§Ù„Ø£ØµÙ†Ø§Ù</span></div>
        <div><i class="fa fa-motorcycle"></i><span>Ø§Ù„Ù…Ù†Ø§Ø¯ÙŠØ¨</span></div>
        <div><i class="fa fa-group"></i><span>Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</span></div>
        <div><i class="fa fa-sitemap"></i><span>Ø§Ù„ØªÙØ³ÙŠØ·</span></div>
        <div><i class="fa fa-user-tie"></i><span>Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</span></div>
        <div><i class="fa fa-box"></i><span>Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</span></div>
      </div>
      <div style="display: flex; align-items: center; gap: 10px;">
        <div class="status">ÙŠÙˆØ¬Ø¯ Ø£ØµÙ†Ø§Ù ÙˆØµÙ„Øª Ù„Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰</div>
        <div class="exit-btn" id="exitBtn"><i class="fa fa-sign-out"></i> Ø®Ø±ÙˆØ¬</div>
      </div>
    </div>

    <!-- Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <div class="main-container">
      <div class="tile" onclick="openPage('invoiceBuy')"><i class="fa fa-shopping-cart"></i><span>ÙØ§ØªÙˆØ±Ø© Ø´Ø±Ø§Ø¡</span></div>
      <div class="tile" onclick="openPage('invoiceSell')"><i class="fa fa-file-text"></i><span>ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø¨ÙŠØ¹</span></div>
      <div class="tile" onclick="openPage('invoiceQuick')"><i class="fa fa-credit-card"></i><span>ÙØ§ØªÙˆØ±Ø© Ø¨ÙŠØ¹ Ø³Ø±ÙŠØ¹</span></div>
      <div class="tile" onclick="openPage('invoiceNormal')"><i class="fa fa-shopping-cart"></i><span>ÙØ§ØªÙˆØ±Ø© Ø¨ÙŠØ¹ Ø¹Ø§Ø¯ÙŠ</span></div>
      <div class="tile" onclick="openPage('cashPayment')"><i class="fa fa-money"></i><span>Ø¥Ø¶Ø§ÙØ© ØµØ±Ù Ù†Ù‚Ø¯ÙŠØ©</span></div>
      <div class="tile" onclick="openPage('cashTransfer')"><i class="fa fa-credit-card"></i><span>Ø¥Ø¶Ø§ÙØ© ØªØ­ÙˆÙŠÙ„ Ù†Ù‚Ø¯ÙŠ</span></div>
      <div class="tile" onclick="openPage('products')"><i class="fa fa-th-large"></i><span>Ø§Ù„Ø£ØµÙ†Ø§Ù</span></div>
      <div class="tile" onclick="openPage('stockInventory')"><i class="fa fa-archive"></i><span>Ø¬Ø±Ø¯ Ø§Ù„Ù…Ø®Ø²Ù†</span></div>
      <div class="tile" onclick="openPage('suppliers')"><i class="fa fa-truck"></i><span>Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</span></div>
      <div class="tile" onclick="openPage('agents')"><i class="fa fa-user"></i><span>Ø§Ù„Ù…Ù†Ø§Ø¯ÙŠØ¨</span></div>
      <div class="tile" onclick="openPage('customers')"><i class="fa fa-users"></i><span>Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</span></div>
      <div class="tile" onclick="openPage('priceList')"><i class="fa fa-clipboard"></i><span>Ø¹Ø±Ø¶ Ø³Ø¹Ø±</span></div>
      <div class="tile" onclick="openPage('treasury')"><i class="fa fa-briefcase"></i><span>Ø§Ù„Ø®Ø²Ù†Ø©</span></div>
    </div>

    <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø³ÙÙ„ÙŠ -->
    <div class="footer">
      <div class="footer-left">
        <span>Smart-Soft 2023 Â© Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù†Ø´Ø±</span>
        <div class="icons-small">
          <div class="icon-small">?</div>
          <div class="icon-small">âš™ï¸</div>
          <div class="icon-small">ğŸ””</div>
        </div>
      </div>
      <div class="footer-right">
        <div class="weather"><img src="https://i.imgur.com/7K6fXzL.jpg" alt="Weather" style="width:20px;height:20px;"> <span id="weather">27Â°C ØµØ§ÙÙŠ ØºØ§Ø¦Ù…Ø©</span></div>
        <div class="icons-small">
          <div class="icon-small">ğŸ•’</div>
          <div class="icon-small">ğŸ“…</div>
          <div class="icon-small">ğŸ’¬</div>
        </div>
      </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø±ÙˆØ¬ -->
    <div class="modal" id="exitModal">
      <div class="modal-content">
        <h3>Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ</h3>
        <p>Ø³ØªÙÙ‚Ø¯ Ø£ÙŠ Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± Ù…Ø­ÙÙˆØ¸Ø©.</p>
        <div class="modal-buttons">
          <button class="btn btn-yes" onclick="confirmExit()">Ù†Ø¹Ù…</button>
          <button class="btn btn-no" onclick="closeModal()">Ù„Ø§</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© -->
  <div id="invoiceBuyPage" class="page-content">
    <div class="header-page">
      <h1>ÙØ§ØªÙˆØ±Ø© Ø´Ø±Ø§Ø¡</h1>
      <button class="back-btn" onclick="openPage('dashboard')">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    </div>
    <form id="invoiceBuyForm">
      <div class="form-group">
        <label>Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</label>
        <input type="text" id="invoiceBuyNum" required>
      </div>
      <div class="form-group">
        <label>Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯</label>
        <select id="invoiceBuySupplier" required>
          <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ±Ø¯</option>
        </select>
      </div>
      <div class="form-group">
        <label>Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù</label>
        <select id="invoiceBuyProduct" required>
          <option value="">Ø§Ø®ØªØ± Ø§Ù„ØµÙ†Ù</option>
        </select>
      </div>
      <div class="form-group">
        <label>Ø§Ù„ÙƒÙ…ÙŠØ©</label>
        <input type="number" id="invoiceBuyQty" value="1" required>
      </div>
      <div class="form-group">
        <label>Ø§Ù„Ø³Ø¹Ø±</label>
        <input type="number" id="invoiceBuyPrice" step="0.01" required>
      </div>
      <button type="button" onclick="addInvoiceBuyItem()">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
    </form>

    <h2 style="margin-top: 30px;">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ØµÙ†Ø§Ù ÙÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø©</h2>
    <table id="invoiceBuyTable">
      <thead>
        <tr>
          <th>Ø§Ù„ØµÙ†Ù</th>
          <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
          <th>Ø§Ù„Ø³Ø¹Ø±</th>
          <th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
          <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
    <div style="margin-top: 20px;">
      <button class="print-btn" onclick="printInvoice('buy')">Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©</button>
      <button onclick="saveInvoiceBuy()">Ø­ÙØ¸ Ø§Ù„ÙØ§ØªÙˆØ±Ø©</button>
    </div>
  </div>

  <div id="productsPage" class="page-content">
    <div class="header-page">
      <h1>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£ØµÙ†Ø§Ù</h1>
      <button class="back-btn" onclick="openPage('dashboard')">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    </div>
    <h2>Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù Ø¬Ø¯ÙŠØ¯</h2>
    <form id="productForm">
      <div class="form-group">
        <label>Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù</label>
        <input type="text" id="productName" required>
      </div>
      <div class="form-group">
        <label>Ø§Ù„Ø³Ø¹Ø±</label>
        <input type="number" id="productPrice" step="0.01" required>
      </div>
      <div class="form-group">
        <label>Ø§Ù„ÙƒÙ…ÙŠØ©</label>
        <input type="number" id="productQty" required>
      </div>
      <div class="form-group">
        <label>Ø§Ù„ÙˆØ­Ø¯Ø©</label>
        <select id="productUnit" required>
          <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙˆØ­Ø¯Ø©</option>
          <option value="Ù‚Ø·Ø¹Ø©">Ù‚Ø·Ø¹Ø©</option>
          <option value="ÙƒÙŠÙ„Ùˆ">ÙƒÙŠÙ„Ùˆ</option>
          <option value="Ù„ØªØ±">Ù„ØªØ±</option>
          <option value="ØµÙ†Ø¯ÙˆÙ‚">ØµÙ†Ø¯ÙˆÙ‚</option>
        </select>
      </div>
      <button type="submit">Ø­ÙØ¸ Ø§Ù„ØµÙ†Ù</button>
    </form>

    <h2 style="margin-top: 30px;">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ØµÙ†Ø§Ù</h2>
    <table id="productsTable">
      <thead>
        <tr>
          <th>Ø§Ù„Ø§Ø³Ù…</th>
          <th>Ø§Ù„Ø³Ø¹Ø±</th>
          <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
          <th>Ø§Ù„ÙˆØ­Ø¯Ø©</th>
          <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
  </div>

  <div id="customersPage" class="page-content">
    <div class="header-page">
      <h1>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h1>
      <button class="back-btn" onclick="openPage('dashboard')">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    </div>
    <h2>Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</h2>
    <form id="customerForm">
      <div class="form-group">
        <label>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</label>
        <input type="text" id="customerName" required>
      </div>
      <div class="form-group">
        <label>Ø§Ù„Ù‡Ø§ØªÙ</label>
        <input type="text" id="customerPhone">
      </div>
      <div class="form-group">
        <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
        <input type="text" id="customerAddress">
      </div>
      <button type="submit">Ø­ÙØ¸ Ø§Ù„Ø¹Ù…ÙŠÙ„</button>
    </form>

    <h2 style="margin-top: 30px;">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h2>
    <table id="customersTable">
      <thead>
        <tr>
          <th>Ø§Ù„Ø§Ø³Ù…</th>
          <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
          <th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>
          <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
  </div>

  <div id="suppliersPage" class="page-content">
    <div class="header-page">
      <h1>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</h1>
      <button class="back-btn" onclick="openPage('dashboard')">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    </div>
    <h2>Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ±Ø¯ Ø¬Ø¯ÙŠØ¯</h2>
    <form id="supplierForm">
      <div class="form-group">
        <label>Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯</label>
        <input type="text" id="supplierName" required>
      </div>
      <div class="form-group">
        <label>Ø§Ù„Ù‡Ø§ØªÙ</label>
        <input type="text" id="supplierPhone">
      </div>
      <div class="form-group">
        <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
        <input type="text" id="supplierAddress">
      </div>
      <button type="submit">Ø­ÙØ¸ Ø§Ù„Ù…ÙˆØ±Ø¯</button>
    </form>

    <h2 style="margin-top: 30px;">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</h2>
    <table id="suppliersTable">
      <thead>
        <tr>
          <th>Ø§Ù„Ø§Ø³Ù…</th>
          <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
          <th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>
          <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
  </div>

  <div id="treasuryPage" class="page-content">
    <div class="header-page">
      <h1>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø²Ù†Ø©</h1>
      <button class="back-btn" onclick="openPage('dashboard')">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    </div>
    <h2>Ø¥Ø¶Ø§ÙØ© ØµØ±Ù Ù†Ù‚Ø¯ÙŠØ©</h2>
    <form id="treasuryForm">
      <div class="form-group">
        <label>Ø§Ù„Ù†ÙˆØ¹</label>
        <select id="treasuryType" required>
          <option value="ØµØ±Ù">ØµØ±Ù</option>
          <option value="Ø¥ÙŠØ¯Ø§Ø¹">Ø¥ÙŠØ¯Ø§Ø¹</option>
        </select>
      </div>
      <div class="form-group">
        <label>Ø§Ù„Ù…Ø¨Ù„Øº</label>
        <input type="number" id="treasuryAmount" step="0.01" required>
      </div>
      <div class="form-group">
        <label>Ø§Ù„Ø³Ø¨Ø¨</label>
        <input type="text" id="treasuryReason" required>
      </div>
      <button type="submit">Ø­ÙØ¸ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</button>
    </form>

    <h2 style="margin-top: 30px;">Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</h2>
    <table id="treasuryTable">
      <thead>
        <tr>
          <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
          <th>Ø§Ù„Ù†ÙˆØ¹</th>
          <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
          <th>Ø§Ù„Ø³Ø¨Ø¨</th>
          <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
  </div>

  <!-- Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰ (Invoice Sell, Quick, Normal, Cash Payment, Cash Transfer, Stock Inventory, Agents, Price List) -->
  <!-- (Ù†Ø¶ÙŠÙÙ‡Ø§ ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„ÙƒØ§Ù…Ù„) -->

  <script>
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    if (localStorage.getItem('isLoggedIn') !== 'true') {
      document.getElementById('loginPage').style.display = 'block';
      document.getElementById('dashboardPage').style.display = 'none';
    } else {
      document.getElementById('loginPage').style.display = 'none';
      document.getElementById('dashboardPage').style.display = 'block';
    }

    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    function login() {
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value.trim();
      const errorMessage = document.getElementById('errorMessage');

      if (username === "admin" && password === "1234") {
        localStorage.setItem('isLoggedIn', 'true');
        localStorage.setItem('username', username);
        document.getElementById('loginPage').style.display = 'none';
        document.getElementById('dashboardPage').style.display = 'block';
      } else {
        errorMessage.textContent = "Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©";
      }
    }

    // Ø§Ù„Ø®Ø±ÙˆØ¬
    document.getElementById('exitBtn').addEventListener('click', function() {
      document.getElementById('exitModal').style.display = 'flex';
    });

    function closeModal() {
      document.getElementById('exitModal').style.display = 'none';
    }

    function confirmExit() {
      localStorage.removeItem('isLoggedIn');
      localStorage.removeItem('username');
      window.location.href = 'system.html';
    }

    document.getElementById('exitModal').addEventListener('click', function(e) {
      if (e.target === this) {
        closeModal();
      }
    });

    // ÙØªØ­ ØµÙØ­Ø© Ø¯Ø§Ø®Ù„ÙŠØ©
    function openPage(pageName) {
      // Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„ Ø§Ù„ØµÙØ­Ø§Øª
      document.querySelectorAll('.page-content').forEach(page => {
        page.classList.remove('active');
      });

      // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
      document.getElementById('dashboardPage').style.display = 'none';

      // Ø¹Ø±Ø¶ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
      document.getElementById(pageName + 'Page').classList.add('active');
    }

    // Ø¹ÙˆØ¯Ø© Ù„Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
    function backToDashboard() {
      document.getElementById('dashboardPage').style.display = 'block';
      document.querySelectorAll('.page-content').forEach(page => {
        page.classList.remove('active');
      });
    }

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„Ø·Ù‚Ø³
    function updateFooter() {
      const now = new Date();
      const dateStr = now.toLocaleDateString('ar-SA');
      const timeStr = now.toLocaleTimeString('ar-SA');
      document.querySelector('.footer-right .icons-small div:nth-child(1)').textContent = timeStr;
      document.querySelector('.footer-right .icons-small div:nth-child(2)').textContent = dateStr;

      const weatherData = ["27Â°C ØµØ§ÙÙŠ ØºØ§Ø¦Ù…Ø©", "25Â°C Ù…Ù…Ø·Ø±", "30Â°C Ù…Ø´Ù…Ø³"];
      const randomWeather = weatherData[Math.floor(Math.random() * weatherData.length)];
      document.getElementById('weather').textContent = randomWeather;
    }

    setInterval(updateFooter, 1000);
    updateFooter();

    // --- ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª --- //
    let products = JSON.parse(localStorage.getItem('products')) || [];
    let customers = JSON.parse(localStorage.getItem('customers')) || [];
    let suppliers = JSON.parse(localStorage.getItem('suppliers')) || [];
    let treasury = JSON.parse(localStorage.getItem('treasury')) || [];
    let invoices = JSON.parse(localStorage.getItem('invoices')) || { buy: [], sell: [] };

    // --- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£ØµÙ†Ø§Ù --- //
    function renderProducts() {
      const tableBody = document.querySelector('#productsTable tbody');
      tableBody.innerHTML = '';

      products.forEach((product, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${product.name}</td>
          <td>${product.price}</td>
          <td>${product.qty}</td>
          <td>${product.unit}</td>
          <td class="actions">
            <button class="edit-btn" onclick="editProduct(${index})">ØªØ¹Ø¯ÙŠÙ„</button>
            <button class="delete-btn" onclick="deleteProduct(${index})">Ø­Ø°Ù</button>
          </td>
        `;
        tableBody.appendChild(row);
      });
    }

    document.getElementById('productForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const name = document.getElementById('productName').value.trim();
      const price = parseFloat(document.getElementById('productPrice').value);
      const qty = parseInt(document.getElementById('productQty').value);
      const unit = document.getElementById('productUnit').value;

      if (!name || isNaN(price) || isNaN(qty) || !unit) {
        alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­");
        return;
      }

      products.push({ name, price, qty, unit });
      localStorage.setItem('products', JSON.stringify(products));
      renderProducts();
      this.reset();
    });

    function deleteProduct(index) {
      if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ØµÙ†ÙØŸ")) {
        products.splice(index, 1);
        localStorage.setItem('products', JSON.stringify(products));
        renderProducts();
      }
    }

    function editProduct(index) {
      const product = products[index];
      document.getElementById('productName').value = product.name;
      document.getElementById('productPrice').value = product.price;
      document.getElementById('productQty').value = product.qty;
      document.getElementById('productUnit').value = product.unit;

      products.splice(index, 1);
      document.getElementById('productForm').onsubmit = function(e) {
        e.preventDefault();
        const name = document.getElementById('productName').value.trim();
        const price = parseFloat(document.getElementById('productPrice').value);
        const qty = parseInt(document.getElementById('productQty').value);
        const unit = document.getElementById('productUnit').value;

        if (!name || isNaN(price) || isNaN(qty) || !unit) {
          alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­");
          return;
        }

        products.push({ name, price, qty, unit });
        localStorage.setItem('products', JSON.stringify(products));
        renderProducts();
        this.reset();
        resetProductFormSubmit();
      };
    }

    function resetProductFormSubmit() {
      document.getElementById('productForm').onsubmit = function(e) {
        e.preventDefault();
        const name = document.getElementById('productName').value.trim();
        const price = parseFloat(document.getElementById('productPrice').value);
        const qty = parseInt(document.getElementById('productQty').value);
        const unit = document.getElementById('productUnit').value;

        if (!name || isNaN(price) || isNaN(qty) || !unit) {
          alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­");
          return;
        }

        products.push({ name, price, qty, unit });
        localStorage.setItem('products', JSON.stringify(products));
        renderProducts();
        this.reset();
      };
    }

    // --- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ --- //
    function renderCustomers() {
      const tableBody = document.querySelector('#customersTable tbody');
      tableBody.innerHTML = '';

      customers.forEach((customer, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${customer.name}</td>
          <td>${customer.phone || ''}</td>
          <td>${customer.address || ''}</td>
          <td class="actions">
            <button class="edit-btn" onclick="editCustomer(${index})">ØªØ¹Ø¯ÙŠÙ„</button>
            <button class="delete-btn" onclick="deleteCustomer(${index})">Ø­Ø°Ù</button>
          </td>
        `;
        tableBody.appendChild(row);
      });
    }

    document.getElementById('customerForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const name = document.getElementById('customerName').value.trim();
      const phone = document.getElementById('customerPhone').value.trim();
      const address = document.getElementById('customerAddress').value.trim();

      if (!name) {
        alert("Ø§Ù„Ø§Ø³Ù… Ù…Ø·Ù„ÙˆØ¨");
        return;
      }

      customers.push({ name, phone, address });
      localStorage.setItem('customers', JSON.stringify(customers));
      renderCustomers();
      this.reset();
    });

    function deleteCustomer(index) {
      if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„ØŸ")) {
        customers.splice(index, 1);
        localStorage.setItem('customers', JSON.stringify(customers));
        renderCustomers();
      }
    }

    function editCustomer(index) {
      const customer = customers[index];
      document.getElementById('customerName').value = customer.name;
      document.getElementById('customerPhone').value = customer.phone || '';
      document.getElementById('customerAddress').value = customer.address || '';

      customers.splice(index, 1);
      document.getElementById('customerForm').onsubmit = function(e) {
        e.preventDefault();
        const name = document.getElementById('customerName').value.trim();
        const phone = document.getElementById('customerPhone').value.trim();
        const address = document.getElementById('customerAddress').value.trim();

        if (!name) {
          alert("Ø§Ù„Ø§Ø³Ù… Ù…Ø·Ù„ÙˆØ¨");
          return;
        }

        customers.push({ name, phone, address });
        localStorage.setItem('customers', JSON.stringify(customers));
        renderCustomers();
        this.reset();
        resetCustomerFormSubmit();
      };
    }

    function resetCustomerFormSubmit() {
      document.getElementById('customerForm').onsubmit = function(e) {
        e.preventDefault();
        const name = document.getElementById('customerName').value.trim();
        const phone = document.getElementById('customerPhone').value.trim();
        const address = document.getElementById('customerAddress').value.trim();

        if (!name) {
          alert("Ø§Ù„Ø§Ø³Ù… Ù…Ø·Ù„ÙˆØ¨");
          return;
        }

        customers.push({ name, phone, address });
        localStorage.setItem('customers', JSON.stringify(customers));
        renderCustomers();
        this.reset();
      };
    }

    // --- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ† --- //
    function renderSuppliers() {
      const tableBody = document.querySelector('#suppliersTable tbody');
      tableBody.innerHTML = '';

      suppliers.forEach((supplier, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${supplier.name}</td>
          <td>${supplier.phone || ''}</td>
          <td>${supplier.address || ''}</td>
          <td class="actions">
            <button class="edit-btn" onclick="editSupplier(${index})">ØªØ¹Ø¯ÙŠÙ„</button>
            <button class="delete-btn" onclick="deleteSupplier(${index})">Ø­Ø°Ù</button>
          </td>
        `;
        tableBody.appendChild(row);
      });
    }

    document.getElementById('supplierForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const name = document.getElementById('supplierName').value.trim();
      const phone = document.getElementById('supplierPhone').value.trim();
      const address = document.getElementById('supplierAddress').value.trim();

      if (!name) {
        alert("Ø§Ù„Ø§Ø³Ù… Ù…Ø·Ù„ÙˆØ¨");
        return;
      }

      suppliers.push({ name, phone, address });
      localStorage.setItem('suppliers', JSON.stringify(suppliers));
      renderSuppliers();
      this.reset();
    });

    function deleteSupplier(index) {
      if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ±Ø¯ØŸ")) {
        suppliers.splice(index, 1);
        localStorage.setItem('suppliers', JSON.stringify(suppliers));
        renderSuppliers();
      }
    }

    function editSupplier(index) {
      const supplier = suppliers[index];
      document.getElementById('supplierName').value = supplier.name;
      document.getElementById('supplierPhone').value = supplier.phone || '';
      document.getElementById('supplierAddress').value = supplier.address || '';

      suppliers.splice(index, 1);
      document.getElementById('supplierForm').onsubmit = function(e) {
        e.preventDefault();
        const name = document.getElementById('supplierName').value.trim();
        const phone = document.getElementById('supplierPhone').value.trim();
        const address = document.getElementById('supplierAddress').value.trim();

        if (!name) {
          alert("Ø§Ù„Ø§Ø³Ù… Ù…Ø·Ù„ÙˆØ¨");
          return;
        }

        suppliers.push({ name, phone, address });
        localStorage.setItem('suppliers', JSON.stringify(suppliers));
        renderSuppliers();
        this.reset();
        resetSupplierFormSubmit();
      };
    }

    function resetSupplierFormSubmit() {
      document.getElementById('supplierForm').onsubmit = function(e) {
        e.preventDefault();
        const name = document.getElementById('supplierName').value.trim();
        const phone = document.getElementById('supplierPhone').value.trim();
        const address = document.getElementById('supplierAddress').value.trim();

        if (!name) {
          alert("Ø§Ù„Ø§Ø³Ù… Ù…Ø·Ù„ÙˆØ¨");
          return;
        }

        suppliers.push({ name, phone, address });
        localStorage.setItem('suppliers', JSON.stringify(suppliers));
        renderSuppliers();
        this.reset();
      };
    }

    // --- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø²Ù†Ø© --- //
    function renderTreasury() {
      const tableBody = document.querySelector('#treasuryTable tbody');
      tableBody.innerHTML = '';

      treasury.forEach((op, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${op.date}</td>
          <td>${op.type}</td>
          <td>${op.amount}</td>
          <td>${op.reason}</td>
          <td class="actions">
            <button class="delete-btn" onclick="deleteTreasury(${index})">Ø­Ø°Ù</button>
          </td>
        `;
        tableBody.appendChild(row);
      });
    }

    document.getElementById('treasuryForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const type = document.getElementById('treasuryType').value;
      const amount = parseFloat(document.getElementById('treasuryAmount').value);
      const reason = document.getElementById('treasuryReason').value.trim();

      if (isNaN(amount) || !reason) {
        alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­");
        return;
      }

      const now = new Date();
      const dateStr = now.toLocaleDateString('ar-SA') + ' ' + now.toLocaleTimeString('ar-SA');

      treasury.push({ date: dateStr, type, amount, reason });
      localStorage.setItem('treasury', JSON.stringify(treasury));
      renderTreasury();
      this.reset();
    });

    function deleteTreasury(index) {
      if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©ØŸ")) {
        treasury.splice(index, 1);
        localStorage.setItem('treasury', JSON.stringify(treasury));
        renderTreasury();
      }
    }

    // --- ÙØ§ØªÙˆØ±Ø© Ø´Ø±Ø§Ø¡ --- //
    let currentInvoiceBuyItems = [];

    function addInvoiceBuyItem() {
      const supplierId = document.getElementById('invoiceBuySupplier').value;
      const productId = document.getElementById('invoiceBuyProduct').value;
      const qty = parseInt(document.getElementById('invoiceBuyQty').value);
      const price = parseFloat(document.getElementById('invoiceBuyPrice').value);

      if (!supplierId || !productId || isNaN(qty) || isNaN(price)) {
        alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­");
        return;
      }

      const product = products.find(p => p.name === productId);
      const total = qty * price;

      currentInvoiceBuyItems.push({
        product: product.name,
        qty,
        price,
        total
      });

      renderInvoiceBuyTable();
      document.getElementById('invoiceBuyQty').value = 1;
      document.getElementById('invoiceBuyPrice').value = '';
    }

    function renderInvoiceBuyTable() {
      const tableBody = document.querySelector('#invoiceBuyTable tbody');
      tableBody.innerHTML = '';

      currentInvoiceBuyItems.forEach((item, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${item.product}</td>
          <td>${item.qty}</td>
          <td>${item.price}</td>
          <td>${item.total}</td>
          <td class="actions">
            <button class="delete-btn" onclick="removeInvoiceBuyItem(${index})">Ø­Ø°Ù</button>
          </td>
        `;
        tableBody.appendChild(row);
      });
    }

    function removeInvoiceBuyItem(index) {
      currentInvoiceBuyItems.splice(index, 1);
      renderInvoiceBuyTable();
    }

    function saveInvoiceBuy() {
      if (currentInvoiceBuyItems.length === 0) {
        alert("Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ØµÙ†Ø§Ù ÙÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø©");
        return;
      }

      const invoiceNum = document.getElementById('invoiceBuyNum').value.trim();
      const supplierId = document.getElementById('invoiceBuySupplier').value;

      if (!invoiceNum || !supplierId) {
        alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙˆØ§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯");
        return;
      }

      const total = currentInvoiceBuyItems.reduce((sum, item) => sum + item.total, 0);
      const now = new Date();
      const dateStr = now.toLocaleDateString('ar-SA') + ' ' + now.toLocaleTimeString('ar-SA');

      const invoice = {
        number: invoiceNum,
        supplier: supplierId,
        date: dateStr,
        items: currentInvoiceBuyItems,
        total: total
      };

      invoices.buy.push(invoice);
      localStorage.setItem('invoices', JSON.stringify(invoices));

      alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­");
      currentInvoiceBuyItems = [];
      renderInvoiceBuyTable();
      document.getElementById('invoiceBuyForm').reset();
    }

    function printInvoice(type) {
      if (currentInvoiceBuyItems.length === 0) {
        alert("Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ØµÙ†Ø§Ù Ù„Ø·Ø¨Ø§Ø¹ØªÙ‡Ø§");
        return;
      }

      let html = '<h2>ÙØ§ØªÙˆØ±Ø© ' + (type === 'buy' ? 'Ø´Ø±Ø§Ø¡' : 'Ø¨ÙŠØ¹') + '</h2>';
      html += '<table border="1" style="width:100%; border-collapse: collapse;">';
      html += '<thead><tr><th>Ø§Ù„ØµÙ†Ù</th><th>Ø§Ù„ÙƒÙ…ÙŠØ©</th><th>Ø§Ù„Ø³Ø¹Ø±</th><th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th></tr></thead><tbody>';

      currentInvoiceBuyItems.forEach(item => {
        html += `<tr><td>${item.product}</td><td>${item.qty}</td><td>${item.price}</td><td>${item.total}</td></tr>`;
      });

      const total = currentInvoiceBuyItems.reduce((sum, item) => sum + item.total, 0);
      html += `</tbody><tfoot><tr><td colspan="3">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</td><td>${total}</td></tr></tfoot></table>`;
      html += '<p>ØªÙ…Øª Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© ÙÙŠ: ' + new Date().toLocaleString('ar-SA') + '</p>';

      const printWindow = window.open('', '_blank');
      printWindow.document.write(`
        <html>
          <head>
            <title>ÙØ§ØªÙˆØ±Ø© ${type === 'buy' ? 'Ø´Ø±Ø§Ø¡' : 'Ø¨ÙŠØ¹'}</title>
            <style>
              body { font-family: Arial, sans-serif; }
              table { width: 100%; border-collapse: collapse; }
              th, td { padding: 8px; text-align: center; border: 1px solid #000; }
              tfoot td { font-weight: bold; }
            </style>
          </head>
          <body>${html}</body>
        </html>
      `);
      printWindow.document.close();
      printWindow.print();
    }

    // --- ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø§Øª --- //
    document.addEventListener('DOMContentLoaded', function() {
      renderProducts();
      renderCustomers();
      renderSuppliers();
      renderTreasury();

      // Ù…Ù„Ø¡ Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ† ÙˆØ§Ù„Ø£ØµÙ†Ø§Ù ÙÙŠ ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ø´Ø±Ø§Ø¡
      const supplierSelect = document.getElementById('invoiceBuySupplier');
      suppliers.forEach(s => {
        const option = document.createElement('option');
        option.value = s.name;
        option.textContent = s.name;
        supplierSelect.appendChild(option);
      });

      const productSelect = document.getElementById('invoiceBuyProduct');
      products.forEach(p => {
        const option = document.createElement('option');
        option.value = p.name;
        option.textContent = p.name;
        productSelect.appendChild(option);
      });
    });
  </script>

</body>
</html>